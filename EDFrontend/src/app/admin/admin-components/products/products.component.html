<div class="container">
  <table class="table">
        <tr class="table-header" *ngIf="product">
          <th>Ürün Adı</th>
          <th>Marka</th>
          <th>Renk</th>
          <th>Kategori</th>
          <th>Alt Kategori</th>
          <th>Fiyat</th>
          <th>Stok</th>
        </tr>
        <tr *ngIf="changeScreen">  
          
          <td>
            <form [formGroup]="productAddForm">
              <mat-form-field>
                <mat-label>Ürün Adı Giriniz</mat-label>
                <input matInput formControlName="productName" >
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Marka Seçiniz</mat-label>
              <mat-select formControlName="brandId" >
                <mat-option  *ngFor="let brand of brands" [value]="brand.id">
                  {{brand.brandName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Renk Seçiniz</mat-label>
              <mat-select formControlName="colorId" >
                <mat-option  *ngFor="let color of colors" [value]="color.id">
                  {{color.colorName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Kategori Seçiniz</mat-label>
              <mat-select   formControlName="categoryId"  [(ngModel)]="currentCategoryId"  >
                <mat-option  *ngFor="let category of categories"  [value]="category.id" (click)="getChCatBySelectedCategory()">
                        {{category.categoryName}}
              </mat-option>
              </mat-select>
           </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field  >
              <mat-label>Alt Kategori Seçiniz</mat-label>
              <mat-select  formControlName="childCategoryId" >
                <mat-option *ngFor="let childCat of childCats "  [value]="childCat.id"  >
                  
                    {{childCat.childCategoryName}}
                  
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Ürün Fiyatı Giriniz</mat-label>
              <input matInput formControlName="unitPrice"  [value]="">
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Ürün Adeti</mat-label>
              <input matInput formControlName="quantity"  [value]="">
            </mat-form-field>
          </form>
          </td>
          <td>
              <button class="op-button" [disabled]="!productAddForm.valid" (click)="add()"  style="width: 110px;"   >Ekle</button>

          </td>
        
        </tr>
        <tr  *ngIf="productDetail">
          <td  >
            <form [formGroup]="productAddForm">
              <mat-form-field>
                <mat-label>Ürün Adı Giriniz</mat-label>
                <input matInput formControlName="productName" [(ngModel)]="productDetail.productName">
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Marka Seçiniz</mat-label>
              <mat-select formControlName="brandId" [(ngModel)]="productDetail.brandName" >
                <mat-option  *ngFor="let brand of brands" [value]="brand.id" >
                  {{brand.brandName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Renk Seçiniz</mat-label>
              <mat-select formControlName="colorId" [(ngModel)]="productDetail.colorName" >
                <mat-option  *ngFor="let color of colors" [value]="color.id">
                  {{color.colorName}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td *ngIf="currentCategoryId">
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Kategori Seçiniz</mat-label>
              <mat-select   formControlName="categoryId" [(ngModel)]="currentCategoryId" [(ngModel)]="productDetail.categoryName"  >
                <mat-option  *ngFor="let category of categories"  [value]="category.id"   >
                        {{category.categoryName}}
              </mat-option>
              </mat-select>
           </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field  >
              <mat-label>Alt Kategori Seçiniz</mat-label>
              <mat-select  formControlName="childCategoryId"  [(ngModel)]="productDetail.childCategoryName" >
                <mat-option *ngFor="let childCat of childCats "  [value]="childCat.id"  >
                  
                    {{childCat.childCategoryName}}
                  
                </mat-option>
              </mat-select>
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Ürün Fiyatı Giriniz</mat-label>
              <input matInput formControlName="unitPrice" [(ngModel)]="productDetail.unitPrice" [value]="">
            </mat-form-field>
          </form>
          </td>
          <td>
            <form [formGroup]="productAddForm">
            <mat-form-field >
              <mat-label>Ürün Adeti</mat-label>
              <input matInput formControlName="quantity" [(ngModel)]="productDetail.quantity" [value]="">
            </mat-form-field>
          </form>
          </td>
          <td>
              <button class="op-button"  (click)="add()"  style="width: 110px;"   >Güncelle</button>

          </td>
        </tr>
        
        <tr  *ngFor="let product of productDetails.reverse()"  >
        
          <td>{{ product.productName }}</td>
          <td>{{ product.brandName }}</td>
          <td>{{ product.colorName }}</td>
          <td>{{ product.categoryName }}</td>
          <td>{{ product.childCategoryName }}</td>
          <td>{{ product.unitPrice }}</td>
          <td>{{ product.quantity }}</td>
          <td > <button class="op-button"   (click)="delete(product.productId)"  >Sil</button>
            <button class="op-button" (click)="updateScreen(product.productId)" (click)="getChCatBySelectedCategory()" >Güncelle</button></td>
        </tr>
     
      </table>
    

</div>